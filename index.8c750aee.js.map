{"mappings":"AAEA,MAAMA,EAAWC,SAASC,cAAc,eACxCC,QAAQC,IAAIJ,GAEZ,MAAMK,EAASJ,SAASC,cAAc,UACtCC,QAAQC,IAAIC,GCHZC,iBACE,MAAMC,QAAqBC,MACzB,qGAGF,GAAID,EAAaE,GAAI,CAEnB,aADsBF,EAAaG,QACpBC,O,CAEjB,MAAM,IAAIC,MAAML,EAAaM,W,CDD/B,GAAaC,MAAKC,IAoElB,IAAmBC,EAASC,EAATD,EAhELhB,EAgEciB,EAhD5B,UAAwBC,MACtBA,EAAKC,MACLA,EAAKC,IACLA,EAAGC,eACHA,EAAcC,QACdA,EAAOC,SACPA,IAEA,MAAO,gMAI6CJ,EAAM,GAAG,kBAAkB,GAAGC,mEAChCE,8tDAqBLJ,4DAoB/C,SAA4BF,GACxB,IAAIQ,EAAaR,EAIjB,OAHIQ,EAAWC,OAAS,KACtBD,EAAaR,EAAQU,MAAM,EAAG,IAAM,OAE/BF,C,CAxBwCG,CAAmBJ,sIAGnBF,sEACQD,mG,CAvDnCQ,CAAeb,EAAK,IAiE1CC,EAAQa,mBAAmB,YAAaZ,EAjEM,IAsGhDjB,EAAS8B,iBAAiB,SAY1B,SAA0BC,GACxB,MAAMC,EAAMD,EAAME,OAAOC,QAAQ,0BAC3BC,EAAWJ,EAAME,OAAOC,QAAQ,8BAChCE,EAAcL,EAAME,OAAOC,QAAQ,kCAKzC,GAHA/B,QAAQC,IAAI4B,GACZ7B,QAAQC,IAAI+B,GACZhC,QAAQC,IAAIgC,IACPJ,EAAK,OACVK,IACA,IAAIC,EACFN,EAAIO,WAAWC,mBAAmBA,mBAAmBC,iBAClDC,YAWL,GAVAvC,QAAQC,IAAIkC,IAUPH,EAASQ,UAAUC,SAAS,UAI/B,OAFAT,EAASQ,UAAUE,IAAI,eACvBC,mBAAmBd,GAGrBA,EAAIW,UAAUI,OAAO,UAErB,IAAK,IAAIC,EAAI,EAAGA,EAAIC,EAAgBxB,OAAQuB,GAAK,EAC3CC,EAAgBD,GAAGV,MAAQA,GAC7BW,EAAgBC,OAAOF,EAAG,GAI9BG,aAAaC,QAAQ,cAAeC,KAAKC,UAAUL,G,IAhDrD,IAAIA,EAAkB,GAEtB,SAASZ,IAKPY,EAJwD,OAApDI,KAAKE,MAAMJ,aAAaK,QAAQ,gBAIlBH,KAAKE,MAAMJ,aAAaK,QAAQ,gBAH9B,E,CAKtBnB,IE9HQpC,SAASC,cAAc","sources":["src/js/newsCard/newsCard.js","src/js/api/news.js","src/js/refs/refs.js"],"sourcesContent":["import { getPopular } from '../api/news.js';\n\nconst newsList = document.querySelector('.news__item');\nconsole.log(newsList);\n\nconst button = document.querySelector(\"button\");\nconsole.log(button);\n\n\n\n\ngetPopular().then(data => {\n    // console.log(data[0]);\n    // console.log(createNewsCard(data[0]));\n    \n    addMarkup(newsList, createNewsCard(data[7]));\n});\n\n\n\n// const handleClick = (event) => {\n//     console.log(\"event: \", event);\n//     console.log(\"event type: \", event.type);\n//     console.log(\"currentTarget: \", event.currentTarget);\n//   };\n  \n//   button.addEventListener(\"click\", handleClick);\n\n\n\n\nfunction createNewsCard({\n  title,\n  media,\n  url,\n  published_date,\n  section,\n  abstract,\n}) {\n  return `\n            <li class=\"news__item\">\n                <article class=\"news__article\">\n                    <div class=\"news__wrapper\">\n                        <img class=\"news__img\" src=\"${media[0]['media-metadata'][2].url}\" alt=\"\">\n                        <p class=\"news__category\">${section}</p>\n\n                        <button type=\"button\" class=\" btn news__add-to-favorite \">\n                        <span class=\"news__add-to-favorite-btn\">Add to favorite\n                           <svg class=\"news__block-icon active-news-icon\" width=\"16\" height=\"16\" viewBox=\"0 0 37 32\">\n                                  <path style=\"stroke: var(--color1, #4440f7)\" stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"4\" stroke-width=\"2.2857\" d=\"M10.666 2.286c-4.207 0-7.619 3.377-7.619 7.543 0 3.363 1.333 11.345 14.458 19.413 0.235 0.143 0.505 0.219 0.78 0.219s0.545-0.076 0.78-0.219c13.125-8.069 14.458-16.050 14.458-19.413 0-4.166-3.412-7.543-7.619-7.543s-7.619 4.571-7.619 4.571-3.412-4.571-7.619-4.571z\"></path>\n                        </svg></span>\n                                \n                        <span class=\"news__remove-to-favorite-btn hidden\">Remove from favorite\n                        <svg class=\"item-news__block-icon active-news-icon\" width=\"16\" height=\"16\" viewBox=\"0 0 37 32\">\n                        <path style=\"stroke: var(--color1, #4440f7)\" stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"4\" stroke-width=\"2.2857\" d=\"M10.666 2.286c-4.207 0-7.619 3.377-7.619 7.543 0 3.363 1.333 11.345 14.458 19.413 0.235 0.143 0.505 0.219 0.78 0.219s0.545-0.076 0.78-0.219c13.125-8.069 14.458-16.050 14.458-19.413 0-4.166-3.412-7.543-7.619-7.543s-7.619 4.571-7.619 4.571-3.412-4.571-7.619-4.571z\"></path>\n                        </svg></span>      \n\n\n                        </button>\n                        \n                        \n\n                        \n                    </div>\n                    <div class=\"new__text-wrapper\">\n                    <h2 class=\" news__title\">${title}</h2>\n                    <p class=\"news__description\">${newsCardTextFormat(abstract)}</p>\n                    </div>\n                    <div class=\"news__info\">\n                        <span class=\"news__date\">${published_date}</span>\n                        <a class=\"news__link-more\" href=\"${url}\">Read more</a>\n                    </div>\n                </article>\n            </li>\n    `;\n}\n\n// addMarkup\n\nfunction addMarkup(element, constMarkup) {\n  element.insertAdjacentHTML('beforeend', constMarkup);\n}\n\n//Add ... 80 elements\n\nfunction newsCardTextFormat(element) {\n    let textFormat = element;\n    if (textFormat.length > 80) {\n      textFormat = element.slice(0, 80) + '...';\n    }\n    return textFormat;\n  }\n\n\n//            \n\n\n// <p class=\"news__favorite\">Add to favorite\n\n// <svg class=\"news__icon\" width=\"16\" height=\"16\" viewBox=\"0 0 37 32\">\n    \n//     <path fill=\"none\" stroke=\"#4440f7\" style=\"stroke: var(--color1, #4440f7)\" stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"4\" stroke-width=\"2\" d=\"M9.333 4c-3.681 0-6.667 2.955-6.667 6.6 0 2.943 1.167 9.927 12.651 16.987 0.206 0.125 0.442 0.191 0.683 0.191s0.477-0.066 0.683-0.191c11.484-7.060 12.651-14.044 12.651-16.987 0-3.645-2.985-6.6-6.667-6.6s-6.667 4-6.667 4-2.985-4-6.667-4z\"></path>\n\n// </svg>\n\n// </p>\n\n// Btn remove\n\n// <span class=\"item-news__remove-to-favorite-btn hidden\">Remove from favorite\n// <svg class=\"item-news__block-icon active-news-icon\" width=\"16\" height=\"16\" viewBox=\"0 0 37 32\">\n// <path style=\"stroke: var(--color1, #4440f7)\" stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"4\" stroke-width=\"2.2857\" d=\"M10.666 2.286c-4.207 0-7.619 3.377-7.619 7.543 0 3.363 1.333 11.345 14.458 19.413 0.235 0.143 0.505 0.219 0.78 0.219s0.545-0.076 0.78-0.219c13.125-8.069 14.458-16.050 14.458-19.413 0-4.166-3.412-7.543-7.619-7.543s-7.619 4.571-7.619 4.571-3.412-4.571-7.619-4.571z\"></path>\n// </svg></span>\n\n\n\n\nnewsList.addEventListener('click', btnAddToFavorite);\nlet newLocalStorage = [];\n\nfunction isLocalEmpty() {\n  if (JSON.parse(localStorage.getItem('newsSection')) === null) {\n    newLocalStorage = [];\n    return;\n  }\n  newLocalStorage = JSON.parse(localStorage.getItem('newsSection'));\n}\nisLocalEmpty();\n\nfunction btnAddToFavorite(event) {\n  const btn = event.target.closest(`.news__add-to-favorite`);\n  const span_add = event.target.closest(`.news__add-to-favorite-btn`);\n  const span_remuve = event.target.closest(`.news__remove-to-favorite-btn `);\n\n  console.log(btn);\n  console.log(span_add);\n  console.log(span_remuve);\n  if (!btn) return;\n  isLocalEmpty();\n  let uri =\n    btn.parentNode.nextElementSibling.nextElementSibling.lastElementChild\n      .textContent;\n  console.log(uri);\n\n//   hide(){\n//     this.button.classList.add(\"hidden\");\n// }\n\n// show(){\n//     this.button.classList.remove(\"hidden\");\n// }\n\n  if (!span_add.classList.contains('hidden')) {\n    // span_remuve.classList.remove('hidden');\n    span_add.classList.add('hidden');\n    addToFavoriteLocal(btn);\n    return;\n  }\n  btn.classList.remove('hidden');\n\n  for (let i = 0; i < newLocalStorage.length; i += 1) {\n    if (newLocalStorage[i].uri === uri) {\n      newLocalStorage.splice(i, 1);\n    }\n\n  }\n  localStorage.setItem(`newsSection`, JSON.stringify(newLocalStorage));\n}\n\n// function addToFavoriteLocal(btn) {\n//   const newsSection = {\n//     id: btn.parentNode.parentNode.id,\n//     img: btn.parentNode.childNodes[1].attributes.src.nodeValue,\n//     category: btn.parentNode.childNodes[3].innerText,\n//     title: btn.parentNode.parentNode.childNodes[3].children[0].innerText,\n//     description: btn.parentNode.parentNode.childNodes[3].children[1].innerText,\n//     date: btn.parentNode.parentNode.lastElementChild.children[0].innerText,\n//     link: btn.parentNode.parentNode.lastElementChild.children[1].attributes[2]\n//       .value,\n//     favorite: 'true',\n//     uri: btn.parentNode.nextElementSibling.nextElementSibling.lastElementChild\n//       .textContent,\n//   };\n//   for (let i = 0; i < newLocalStorage.length; i += 1) {\n//     if (newLocalStorage[i].uri === newsSection.uri) return;\n//   }\n\n//   newLocalStorage.push(newsSection);\n//   localStorage.setItem(`newsSection`, JSON.stringify(newLocalStorage));\n// }\n","const KEY = 'api-key=ccA9QsXbvrHhGuvowEcHjyxEU2jAukPO';\nconst BASE_URL = 'https://api.nytimes.com/svc';\n\nasync function getPopular() {\n  const articleFetch = await fetch(\n    `${BASE_URL}/mostpopular/v2/viewed/1.json?${KEY}`\n  );\n\n  if (articleFetch.ok) {\n    const popular = await articleFetch.json();\n    return popular.results;\n  }\n  throw new Error(articleFetch.statusText);\n}\n\nasync function getCategoryList() {\n  const categoryList = await fetch(\n    `${BASE_URL}//news/v3/content/section-list.json?${KEY}`\n  );\n\n  if (categoryList.ok) {\n    const categories = await categoryList.json();\n    return categories.results;\n  }\n\n  throw new Error(categoryList.statusText);\n}\n\nasync function getDataByCategory(value) {\n  let normalazeValue = value.toLowerCase();\n  let newValue = encodeURIComponent(normalazeValue);\n\n  const data = await fetch(\n    `${BASE_URL}/news/v3/content/all/${newValue}.json?${KEY}`\n  );\n  if (data.ok) {\n    const articles = await data.json();\n\n    return articles.results;\n  }\n\n  throw new Error(data.statusText);\n}\n\nasync function getSearchArticle(value, page) {\n  let dateForUrl = '';\n  // dateForUrl = ` &begin_date=${date}&end_date=${date}`;\n  // &page=26\n  const articleFetch = await fetch(\n    `${BASE_URL}/search/v2/articlesearch.json?q=${value}&page=${page}&${KEY}${dateForUrl}`\n  );\n\n  https: if (articleFetch.ok) {\n    const articles = await articleFetch.json();\n\n    console.log(articles.response);\n    return articles.response.docs;\n  }\n\n  throw new Error(articleFetch.statusText);\n}\n\nexport { getPopular, getCategoryList, getSearchArticle, getDataByCategory };\n","const refs = {\n  body: document.querySelector('body'),\n};\n\nexport { refs };\n"],"names":["$f6ea5caff343a8ce$var$newsList","document","querySelector","console","log","$f6ea5caff343a8ce$var$button","async","articleFetch","fetch","ok","json","results","Error","statusText","then","data","element","constMarkup","title","media","url","published_date","section","abstract","textFormat","length","slice","$f6ea5caff343a8ce$var$newsCardTextFormat","$f6ea5caff343a8ce$var$createNewsCard","insertAdjacentHTML","addEventListener","event","btn","target","closest","span_add","span_remuve","$f6ea5caff343a8ce$var$isLocalEmpty","uri","parentNode","nextElementSibling","lastElementChild","textContent","classList","contains","add","addToFavoriteLocal","remove","i","$f6ea5caff343a8ce$var$newLocalStorage","splice","localStorage","setItem","JSON","stringify","parse","getItem"],"version":3,"file":"index.8c750aee.js.map"}